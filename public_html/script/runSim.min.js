var ajaxcall;
function runSimulation(a){var d=a.glads,b=a.savecode,c=a.single,e=a.ranked;a=a.duel;c||(c=!1);b||(b=!1);e||(e=!1);a||(a=!1);var f=$.Deferred();ajaxcall=$.post("back_simulation.php",{glads:JSON.stringify(d),savecode:b,single:c,ranked:e,duel:a}).done(function(a){try{JSON.parse(a)}catch(g){var b=g}if(b)return showTerminal("ERRO EM TEMPO DE EXECU\u00c7\u00c3O","Algum de seus gladiadores ocasionou um erro na simula\u00e7\u00e3o enquanto ela estava sendo executada.\nVerifique seus c\u00f3digos-fonte e tente novamente."),console.log("ERROR: "+
b),console.log("JSON: "+a),f.resolve("ERROR");a=JSON.parse(a);b=a.simulation;var c=a.error;a=a.output;if(""!=c){if("INVALID_ATTR"==c)showTerminal("ERRO DE VALIDA\u00c7\u00c3O","Os atributos de um dos gladiadores n\u00e3o s\u00e3o v\u00e1lidos ou sua pontua\u00e7\u00e3o n\u00e3o corresponde \u00e0s regras da gladCode");else{c=c.split("/usercode/").join("");for(var e in d)c=c.split("code"+e+".c").join("<span>"+d[e].name+"</span>");showTerminal("ERRO DE COMPILA\u00c7\u00c3O",c)}return f.resolve("ERROR")}if(0<
b.length){if(-1!=a.indexOf("timed out"))return e=a.split("Gladiator ")[1].split(" timed out")[0],showTerminal("GLADIADOR EM LOOP","O c\u00f3digo do gladiador <span>"+e+"</span> est\u00e1 em uma repeti\u00e7\u00e3o da qual n\u00e3o consegue sair.\nEle foi desativado para n\u00e3o comprometer a simula\u00e7\u00e3o.\n\nRevise o c\u00f3digo-fonte e tente novamente."),f.resolve("ERROR");""!=a&&console.log("MENSAGEM: "+a);return f.resolve(b)}});return f.promise()}
var progressButton=function(a,d){this.oldhtml=a.html();a.html("<div id='bar'></div><div id='oldcontent'></div>");a.find("#bar").css({"background-color":"#00638d",width:"0px",height:"100%","border-radius":"3px"});a.prop("disabled","true");a.css("padding","0");a.append("<div id='oldcontent'></div>");$("#oldcontent").css({display:"flex","align-items":"center","justify-content":"center",width:"100%",height:"100%","margin-top":-1*a.outerHeight()});this.bsize=0;this.obj=a;var b=this,c=0,e=0;this.progint=
setInterval(function(){a.find("#bar").width();var f=a.width()/2E3;b.bsize+=f;a.find("#bar").width(b.bsize.toFixed(0));a.find("#oldcontent").html(d[c]);e++;0==e%200&&(c=(c+1)%d.length);a.find("#bar").width()>=a.width()&&(b.kill(),ajaxcall&&ajaxcall.abort(),a.click())},10)};progressButton.prototype.kill=function(){clearInterval(this.progint);this.obj.html(this.oldhtml);this.obj.removeProp("disabled");$("#oldcontent").remove()};
progressButton.prototype.set=function(a,d){this.obj.html("<div id='bar'></div>");this.obj.find("#bar").css({"background-color":"#00638d",width:"0px",height:"100%","border-radius":"3px"});this.obj.prop("disabled","true");this.obj.css("padding","0");this.obj.append("<div id='oldcontent'>"+a+"</div>");$("#oldcontent").css({margin:this.obj.css("margin"),display:"flex","align-items":"center","justify-content":"center",position:"absolute",top:this.obj.position().top,left:this.obj.position().left,width:this.obj.width(),
height:this.obj.height()});this.bsize=this.obj.width()/100*d;this.obj.find("#bar").width(this.bsize.toFixed(0))};function decodeHTML(a){var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b;for(b in d)a=a.replace(new RegExp(d[b],"g"),b);return a};