function update_translation_table(){post("back_translation.php",{action:"GET SUGGESTIONS"}).then(t=>{if("SUCCESS"==t.status){let e="";for(let s in t.suggestions){let n=t.suggestions[s];e+=`<tr>\n                    <td><span>${n.user}</span></td>\n                    <td><span>${n.original}</span></td>\n                    <td><span>${n.suggestion}</span></td>\n                    <td><span>${n.language}</span></td>\n                    <td><span>${n.time}</span></td>\n                </tr>`}$("#translate .table tbody").html(e),$("#translate .table tr").click(function(){function e(t,e){post("back_translation.php",{action:"RESOLVE",answer:e,id:t}).then(t=>{update_translation_table()})}let s=$("#translate .table tr").index($(this))-1,n=t.suggestions[s],a=new Message({message:`<h3>Original:</h3><p>${n.original}</p><h3>Sugestão:</h3><p>${n.suggestion}</p>Aceitar sugestão?`,buttons:{yes:"Sim",no:"Não",cacel:"Cancelar"},class:"skip-translation"}).show();a.click("yes",()=>{e(n.id,"yes")}),a.click("no",()=>{e(n.id,"no")})})}})}function update_news_table(t){post("back_news.php",{action:"LIST"}).then(e=>{if("SUCCESS"==e.status){let s="";for(let t in e.posts){let n=e.posts[t];s+=`<tr>\n                    <td><span>${n.hash}</span></td>\n                    <td><span>${n.title}</span></td>\n                    <td><span>${n.time}</span></td>\n                </tr>`}$("#posts .table tbody").html(s),$("#posts .table tr").click(function(){if($(this).hasClass("selected"))$("#posts .table tr").removeClass("selected"),$("#posts #title").val(""),t.setText(""),$("#posts #send").text("POSTAR");else{$("#posts .table tr").removeClass("selected"),$(this).addClass("selected");let s=$("#posts .table tr").index($(this))-1,n=e.posts[s].body,a=e.posts[s].title;$("#posts #title").val(a),t.setContents(t.clipboard.convert(n),"silent"),$("#posts #send").text("EDITAR")}})}})}$(document).ready(async function(){var t=[];$.post("back_update.php",{action:"GET"}).done(function(e){t=JSON.parse(e),$("#version #current").html(t.join(".")),t[2]||(t[2]=0),$("#version #new").val([t[0],t[1],parseInt(t[2])+1].join("."))}),$("#version #type select").change(function(){var e,s=$(this).find("option"),n=s.index($(this).find("option:selected"));0==n?e=[parseInt(t[0])+1,0]:1==n?e=[t[0],parseInt(t[1])+1]:2==n&&(t[2]||(t[2]=0),e=[t[0],t[1],parseInt(t[2])+1]),$("#version #new").val(e.join("."))}),$("#update #send.button").click(function(){$.post("back_update.php",{action:"SET",version:$("#version #new").val(),keepup:$("#keep-updated input").prop("checked"),pass:$("#pass-div input").val()}).done(function(t){if("WRONGPASS"!=t){var e=$("#changes textarea").val();e=e.replace(/\r?\n/g,"<br/>"),showMessage("Mensagem enviada. Aguarde. Não clique mais de uma vez antes de dar status 500 no console."),$.post("back_sendmail.php",{action:"UPDATE",version:$("#version #new").val(),summary:e,postlink:$("#postlink input").val()}).done(function(t){console.log(t);try{t=JSON.parse(t),showMessage("Versão do sistema atualizada")}catch(t){console.log(t),showMessage("Erro")}$("button").removeAttr("disabled")})}else alert("Wrong Password")})}),$("#side-menu #translate").click(function(){update_translation_table()}),$("#side-menu #posts").click(function(){update_news_table(e)}),$("#side-menu .item").click(function(){let t=$(this).attr("id");$("#side-menu .item").removeClass("selected"),$(this).addClass("selected"),$(".content-box").removeClass("visible"),$(`#${t}.content-box`).addClass("visible")});let e=new Quill("#posts #editor",{theme:"snow",modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block"],[{color:[]},{background:[]}],["link","image"],["clean"]],handlers:{image:function(){let t=this.quill.getSelection(),e=prompt("What is the image URL");e&&this.quill.insertEmbed(t.index,"image",e,Quill.sources.USER)}}}}});e.on("text-change",function(t,e,s){$("#posts #html").val($("#posts #editor .ql-editor").html())}),$("#posts #preview").click(function(){$("#posts #html").hasClass("visible")?($("#posts #html").removeClass("visible"),$(this).text("Ver HTML")):($("#posts #html").addClass("visible"),$(this).text("Ocultar HTML"))}),$("#posts #send").click(async function(){let t=$("#posts #html").val(),s=$("#posts #title").val();if(s.length)if(t.length){let n=!1;"EDITAR"==$("#posts #send").text()&&(n=$("#posts .table tr.selected td").eq(0).text());let a=await post("back_news.php",{action:"POST",title:s,html:t,hash:n});console.log(a),e.setText(""),create_toast("Notícia publicada","success")}else create_toast("Informe o conteúdo","error");else $("#posts #title").focus(),create_toast("Insira um título","error")})});